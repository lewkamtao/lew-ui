---
alwaysApply: false
---
# ç»„ä»¶ç›®å½•ä¸æ–‡ä»¶ç»“æ„è§„èŒƒ

> **é‡è¦æ€§**ï¼šâ­â­â­â­â­  
> è¿™æ˜¯ lew-ui æœ€æ ¸å¿ƒçš„è§„èŒƒï¼Œæ‰€æœ‰ç»„ä»¶å¿…é¡»ä¸¥æ ¼éµå¾ªæ­¤ç»“æ„ã€‚

## æ ‡å‡†ç›®å½•ç»“æ„

```
lib/components/
â”œâ”€â”€ general/          # é€šç”¨ç»„ä»¶ï¼ˆæŒ‰é’®ã€å›¾æ ‡ç­‰ï¼‰
â”œâ”€â”€ form/             # è¡¨å•ç»„ä»¶ï¼ˆè¾“å…¥æ¡†ã€é€‰æ‹©å™¨ç­‰ï¼‰
â”œâ”€â”€ data/             # æ•°æ®å±•ç¤ºç»„ä»¶ï¼ˆè¡¨æ ¼ã€æ ‘ç­‰ï¼‰
â”œâ”€â”€ feedback/         # åé¦ˆç»„ä»¶ï¼ˆå¼¹çª—ã€æç¤ºç­‰ï¼‰
â””â”€â”€ navigation/       # å¯¼èˆªç»„ä»¶ï¼ˆèœå•ã€é¢åŒ…å±‘ç­‰ï¼‰
```

## å•ä¸ªç»„ä»¶ç›®å½•ç»“æ„

### åŸºç¡€ç»“æ„ï¼ˆå¿…éœ€ï¼‰
```
button/
â”œâ”€â”€ index.ts          # ç»„ä»¶å…¥å£ï¼Œå¯¼å‡ºç»„ä»¶å’Œç±»å‹
â”œâ”€â”€ button.mdc        # ç»„ä»¶ MDC æ–‡æ¡£ï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ src/
    â”œâ”€â”€ LewButton.vue # ç»„ä»¶ä¸»æ–‡ä»¶ï¼ˆPascalCaseï¼Œå¸¦ Lew å‰ç¼€ï¼‰
    â””â”€â”€ props.ts      # Props å®šä¹‰
```

### å®Œæ•´ç»“æ„ï¼ˆæ ¹æ®éœ€è¦ï¼‰
```
button/
â”œâ”€â”€ index.ts          # ç»„ä»¶å…¥å£
â”œâ”€â”€ button.mdc        # ç»„ä»¶ MDC æ–‡æ¡£ï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ src/
    â”œâ”€â”€ LewButton.vue         # ç»„ä»¶ä¸»æ–‡ä»¶
    â”œâ”€â”€ props.ts              # Props å®šä¹‰
    â”œâ”€â”€ emits.ts              # Emits å®šä¹‰ï¼ˆå¦‚æœ‰äº‹ä»¶ï¼‰
    â”œâ”€â”€ model.ts              # v-model ç›¸å…³ï¼ˆå¦‚æ”¯æŒåŒå‘ç»‘å®šï¼‰ï¼ˆå¦‚æœåŸæ¥åœ¨propså®šä¹‰çš„ï¼Œéœ€è¦æŠ½ç¦»æ–°å»ºmodel.tsï¼Œmodelï¼Œä¸éœ€è¦å®šä¹‰validatorï¼‰
    â”œâ”€â”€ types.ts              # ç»„ä»¶ç‰¹å®šç±»å‹å®šä¹‰
    â”œâ”€â”€ utils.ts              # å·¥å…·å‡½æ•°ï¼ˆç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼‰
    â””â”€â”€ SubComponent.vue      # å­ç»„ä»¶ï¼ˆå¦‚ LewButtonGroupï¼‰
```

## MDC æ–‡æ¡£è§„èŒƒï¼ˆå¿…éœ€ï¼‰

> **é‡è¦æ€§**ï¼šâ­â­â­â­â­  
> æ¯ä¸ªç»„ä»¶å¿…é¡»åŒ…å«å¯¹åº”çš„ MDC æ–‡æ¡£æ–‡ä»¶ï¼Œç”¨äº AI è¾…åŠ©å¼€å‘å’Œç»„ä»¶ä½¿ç”¨æŒ‡å¼•ã€‚

### MDC æ–‡ä»¶å‘½å
- æ–‡ä»¶åï¼š`{component-name}.mdc`ï¼ˆkebab-caseï¼‰
- ä½ç½®ï¼šç»„ä»¶ç›®å½•æ ¹çº§åˆ«ï¼ˆä¸ `index.ts` åŒçº§ï¼‰
- ç¤ºä¾‹ï¼š`button/button.mdc`ã€`date-picker/date-picker.mdc`

### MDC æ–‡æ¡£ç»“æ„

```markdown
---
alwaysApply: false
---

# Lew{ComponentName} ç»„ä»¶ä½¿ç”¨æ–‡æ¡£

## 1. ç»„ä»¶åŸºç¡€ä¿¡æ¯
- ç»„ä»¶åç§°ã€æ ¸å¿ƒç”¨é€”ã€é€‚ç”¨ç¯å¢ƒã€åŸºç¡€ç‰¹æ€§ï¼ˆ3-5æ¡ï¼‰

## 2. å¿«é€Ÿå¼€å§‹
- é¢„æœŸæ•ˆæœè¯´æ˜

## 3. è¯¦ç»† API è¯´æ˜
- Propsï¼šè¡¨æ ¼ï¼ˆå±æ€§åã€ç±»å‹ã€é»˜è®¤å€¼ã€å¯é€‰å€¼ã€è¯´æ˜ï¼‰
- æ–¹æ³•ï¼šè¡¨æ ¼ï¼ˆæ–¹æ³•åã€è§¦å‘æ¡ä»¶ã€å‚æ•°ã€è¿”å›å€¼ã€è¯´æ˜ï¼‰
- äº‹ä»¶ï¼šè¡¨æ ¼ï¼ˆäº‹ä»¶åã€è§¦å‘æ¡ä»¶ã€å›è°ƒå‚æ•°ã€è¯´æ˜ï¼‰
- æ’æ§½ï¼šè¡¨æ ¼ï¼ˆæ’æ§½åã€è¯´æ˜ã€ä½¿ç”¨ç¤ºä¾‹ï¼‰

## 4. æ³¨æ„äº‹é¡¹
- ä½¿ç”¨é™åˆ¶ã€è¾¹ç•Œæƒ…å†µã€å…¼å®¹æ€§é—®é¢˜ï¼ˆè‡³å°‘3æ¡ï¼‰

## 5. å¸¸è§é—®é¢˜ä¸ä¿®å¤æ–¹æ¡ˆï¼ˆFAQï¼‰
- æ¯ä¸ªé—®é¢˜åŒ…å«ï¼šç°è±¡ã€åŸå› ã€ä¿®å¤æ–¹æ¡ˆ

## 6. å˜æ›´æ—¥å¿—
- è¡¨æ ¼ï¼ˆç‰ˆæœ¬ã€å˜æ›´å†…å®¹ã€æ—¥æœŸï¼‰
```

### MDC æ–‡æ¡£ç”Ÿæˆ
- è¯¦ç»†ç”Ÿæˆè§„èŒƒå‚è§ `.cursor/create-component-mdc.mdc`
- ä¿®æ”¹ç»„ä»¶åå¿…é¡»åŒæ­¥æ›´æ–° MDC æ–‡æ¡£çš„å˜æ›´æ—¥å¿—

## è‡ªåŠ¨å¯¼å…¥è§„èŒƒ

### Vue API è‡ªåŠ¨å¯¼å…¥

é¡¹ç›®å·²é…ç½® `unplugin-auto-import`ï¼Œä»¥ä¸‹ Vue API **ä¸éœ€è¦æ‰‹åŠ¨å¯¼å…¥**ï¼š

```typescript
// âŒ ä¸è¦æ‰‹åŠ¨å¯¼å…¥ï¼ˆå†—ä½™ï¼‰
import { computed, ref, watch, onMounted, onUnmounted } from 'vue'

// âœ… ç›´æ¥ä½¿ç”¨ï¼ˆè‡ªåŠ¨å¯¼å…¥ï¼‰
const count = ref(0)
const doubled = computed(() => count.value * 2)
watch(count, (newVal) => console.log(newVal))
```

**è‡ªåŠ¨å¯¼å…¥çš„ API åˆ—è¡¨**ï¼ˆè¯¦è§ `lib/auto-imports.d.ts`ï¼‰ï¼š
- Vue æ ¸å¿ƒ API: `ref`, `computed`, `watch`, `watchEffect`, `reactive`, `readonly`, `shallowRef`, `markRaw` ç­‰
- ç”Ÿå‘½å‘¨æœŸ: `onMounted`, `onUnmounted`, `onBeforeMount`, `onUpdated` ç­‰
- ç»„åˆå¼å·¥å…·: `useSlots`, `useAttrs`, `getCurrentInstance` ç­‰
- Vue Router: `useRoute`, `useRouter`, `useLink` ç­‰

**éœ€è¦æ‰‹åŠ¨å¯¼å…¥çš„æƒ…å†µ**ï¼š
- ç¬¬ä¸‰æ–¹åº“ APIï¼ˆå¦‚ `@vueuse/core` çš„ `useImage`ï¼‰
- é¡¹ç›®å†…éƒ¨å·¥å…·å‡½æ•°ï¼ˆå¦‚ `lew-ui/utils` çš„ `any2px`ï¼‰
- ç±»å‹å®šä¹‰ï¼ˆå¦‚ `import type { PropType } from 'vue'`ï¼‰

**æ€§èƒ½å½±å“**ï¼š
- ç§»é™¤å†—ä½™å¯¼å…¥å¯å‡å°‘ ~50-100 å­—èŠ‚/ç»„ä»¶
- æå‡ä»£ç å¯è¯»æ€§
- ç¬¦åˆé¡¹ç›®é…ç½®è§„èŒƒ

## æ–‡ä»¶å‘½åè§„èŒƒ

### ç»„ä»¶æ–‡ä»¶
- **ä¸»ç»„ä»¶**ï¼š`Lew{ComponentName}.vue` (PascalCase)
  - âœ… `LewButton.vue`
  - âœ… `LewInputNumber.vue`
  - âŒ `Button.vue`
  - âŒ `lew-button.vue`

- **å­ç»„ä»¶**ï¼š`Lew{ParentName}{SubName}.vue`
  - âœ… `LewCheckboxGroup.vue`
  - âœ… `LewTabsItem.vue`

### é…ç½®æ–‡ä»¶
- `props.ts` - Props å®šä¹‰
- `emits.ts` - äº‹ä»¶å®šä¹‰
- `model.ts` - v-model é…ç½®
- `types.ts` - ç±»å‹å®šä¹‰

### å·¥å…·æ–‡ä»¶
- ä»…åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨æ—¶æ”¾åœ¨ `src/` ä¸‹
- å¤šç»„ä»¶å…±äº«çš„æ”¾åœ¨ `lib/utils/`

## index.ts æ ‡å‡†å†™æ³•

> **è¯¦ç»†è§„èŒƒ**: å‚è§ `export-rule.mdc` çš„å¯¼å‡ºè§„èŒƒç« èŠ‚

### å¿«é€Ÿå‚è€ƒ

```typescript
// å•ç»„ä»¶å¯¼å‡º
import LewButton from './src/LewButton.vue'
import type { ButtonProps } from './src/props'

export { LewButton }
export type { ButtonProps }
export default LewButton
```

**å…³é”®è¦ç‚¹**:
- å…·åå¯¼å‡ºç»„ä»¶å’Œç±»å‹ï¼ˆæ”¯æŒ tree-shakingï¼‰
- ç±»å‹å¯¼å‡ºä½¿ç”¨ `type` å…³é”®å­—
- é»˜è®¤å¯¼å‡ºä¸»ç»„ä»¶ï¼ˆæ–¹ä¾¿ç›´æ¥å¼•å…¥ï¼‰

## props.ts æ ‡å‡†å†™æ³•

> **è¯¦ç»†è§„èŒƒ**: å‚è§ `typescript.mdc` çš„ Props ç±»å‹å®šä¹‰ç« èŠ‚

### å¿«é€Ÿå‚è€ƒ

```typescript
import type { PropType, ExtractPropTypes } from 'vue'

export const buttonProps = {
  size: {
    type: String as PropType<'mini' | 'small' | 'medium' | 'large'>,
    default: 'medium'
  },
  disabled: {
    type: Boolean,
    default: false
  }
} as const

export type ButtonProps = ExtractPropTypes<typeof buttonProps>
```

**å…³é”®è¦ç‚¹**:
- ä½¿ç”¨ `PropType` æŒ‡å®šç²¾ç¡®ç±»å‹
- ä½¿ç”¨ `as const` ç¡®ä¿ç±»å‹æ¨æ–­
- ä½¿ç”¨ `ExtractPropTypes` å¯¼å‡ºç±»å‹

### Props æ‰©å±•å±æ€§ï¼ˆç”¨äºåœ¨çº¿æ–‡æ¡£ï¼‰

ä¸ºäº†è®©åœ¨çº¿æ–‡æ¡£ç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºç±»å‹ä¿¡æ¯ï¼Œprops å®šä¹‰ä¸­å¯ä»¥æ·»åŠ ä»¥ä¸‹æ‰©å±•å±æ€§ï¼š

#### 1. `typeValues` - æšä¸¾å€¼åˆ—è¡¨

ç”¨äºæ˜¾ç¤ºå¯é€‰å€¼çš„æ ‡ç­¾ï¼š

```typescript
export const buttonProps = {
  size: {
    type: String as PropType<'mini' | 'small' | 'medium' | 'large'>,
    default: 'medium',
    typeValues: ['mini', 'small', 'medium', 'large']  // âœ… æ–‡æ¡£ç³»ç»Ÿä¼šæ˜¾ç¤ºä¸ºæ ‡ç­¾
  }
}
```

#### 2. `typePopKeys` - å¤æ‚ç±»å‹å¼•ç”¨

ç”¨äºæ˜¾ç¤ºå¯ç‚¹å‡»çš„ç±»å‹å®šä¹‰ï¼ˆä» `docs/assets/all-types.ts` è¯»å–ï¼‰ï¼š

```typescript
export const selectProps = {
  options: {
    type: Array as PropType<LewSelectOption[]>,
    typePopKeys: ['LewSelectOption'],  // âœ… æ˜¾ç¤ºä¸ºå¯ç‚¹å‡»çš„ç²‰è‰²æ ‡ç­¾ï¼Œç‚¹å‡»æ˜¾ç¤ºç±»å‹å®šä¹‰
    validator: validators.array({
      componentName: 'LewSelect',
      propName: 'options',
    }),
  }
}
```

#### 3. `typeComponents` - ç»„ä»¶ç±»å‹å¼•ç”¨

ç”¨äºæ˜¾ç¤ºè·³è½¬åˆ°å…¶ä»–ç»„ä»¶çš„é“¾æ¥ï¼š

```typescript
export const modalProps = {
  okButtonProps: {
    type: Object as PropType<LewButtonProps>,
    typeComponents: [{ name: 'LewButtonProps', path: '/Button' }],  // âœ… æ˜¾ç¤ºä¸ºå¯ç‚¹å‡»çš„ç´«è‰²æ ‡ç­¾ï¼Œç‚¹å‡»è·³è½¬åˆ° Button ç»„ä»¶
    validator: validators.object({
      componentName: 'LewModal',
      propName: 'okButtonProps',
    }),
  }
}
```

#### 4. `typeGhost` - è‡ªå®šä¹‰ç±»å‹æ–‡æœ¬

ç”¨äºæ˜¾ç¤ºç®€å•çš„ç±»å‹æ–‡æœ¬æ ‡ç­¾ï¼š

```typescript
export const componentProps = {
  customProp: {
    type: null,
    typeGhost: 'LewComponentSource',  // âœ… æ˜¾ç¤ºä¸ºç²‰è‰²æ ‡ç­¾
  }
}
```

#### 5. `defaultLocale` - å›½é™…åŒ–é»˜è®¤å€¼

ç”¨äºä»å›½é™…åŒ–é…ç½®è¯»å–é»˜è®¤å€¼ï¼š

```typescript
export const inputProps = {
  placeholder: {
    type: String,
    defaultLocale: true,  // âœ… ä» locale.t('componentName.placeholder') è¯»å–
    validator: validators.string({
      componentName: 'LewInput',
      propName: 'placeholder',
    }),
  }
}
```

#### 6. `hidden` - éšè—å±æ€§

ç”¨äºåœ¨æ–‡æ¡£ä¸­éšè—æŸäº›å†…éƒ¨ä½¿ç”¨çš„ propï¼š

```typescript
export const selectProps = {
  searchMethodId: {
    type: String,
    hidden: true,  // âœ… ä¸åœ¨æ–‡æ¡£ä¸­æ˜¾ç¤º
    validator: validators.string({
      componentName: 'LewSelect',
      propName: 'searchMethodId',
    }),
  }
}
```

### Props å‘½åçº¦å®š
- ä½¿ç”¨ camelCase
- Boolean ç±»å‹é»˜è®¤å€¼åº”ä¸º `false`
- å°ºå¯¸ç»Ÿä¸€ä½¿ç”¨ï¼š`mini | small | medium | large`
- é¢œè‰²ä½¿ç”¨è¯­ä¹‰åŒ–åç§°æˆ–ä¸»é¢˜è‰²åç§°

## emits.ts æ ‡å‡†å†™æ³•

```typescript
// å®šä¹‰ emits å¯¹è±¡
export const buttonEmits = {
  click: (e: MouseEvent) => true,
  change: (value: string | number) => true,
  'update:modelValue': (value: any) => true
}

// å¯¼å‡º Emits ç±»å‹
export type ButtonEmits = typeof buttonEmits
```

## v-model æ”¯æŒï¼ˆä½¿ç”¨ Vue 3.4+ defineModelï¼‰

### åŸºæœ¬ç”¨æ³•

lew-ui ä½¿ç”¨ Vue 3.4+ çš„ `defineModel` API å®ç°åŒå‘ç»‘å®šï¼Œ**ä¸å†ä½¿ç”¨** `update:modelValue` äº‹ä»¶æ–¹å¼ã€‚

#### å•ä¸ª v-model

```typescript
// âŒ æ—§æ–¹å¼ï¼ˆä¸æ¨èï¼‰
const props = defineProps({
  modelValue: String
})
const emit = defineEmits(['update:modelValue'])

// âœ… æ–°æ–¹å¼ï¼ˆæ¨èï¼‰
const modelValue = defineModel<string | undefined>({ required: true })
```

#### å¤šä¸ª v-model

```typescript
// ç»„ä»¶å†…éƒ¨
const modelValue = defineModel<string | undefined>({ required: true })
const prefixValue = defineModel<string | undefined>('prefixValue')
const suffixValue = defineModel<string | undefined>('suffixValue')

// ç”¨æˆ·ä½¿ç”¨
<LewInput
  v-model="text"
  v-model:prefixValue="prefix"
  v-model:suffixValue="suffix"
/>
```

### model.ts æ–‡ä»¶

è™½ç„¶ä½¿ç”¨äº† `defineModel`ï¼Œä½†ä»éœ€è¦åœ¨ `model.ts` ä¸­å®šä¹‰ model props ä¾›æ–‡æ¡£ç³»ç»Ÿä½¿ç”¨ï¼š

```typescript
// lib/components/form/input/src/model.ts
export const inputModel = {
  modelValue: {
    type: String,
    default: undefined
  },
  prefixValue: {
    type: String,
    default: undefined
  },
  suffixValue: {
    type: String,
    default: undefined
  }
}

export type InputModel = typeof inputModel
```

### ç»„ä»¶å¯¼å‡º

```typescript
// lib/components/form/input/index.ts
import LewInput from './src/LewInput.vue'
import { inputEmits, type LewInputEmits } from './src/emits'
import { inputModel, type InputModel } from './src/model'
import { inputProps, type LewInputProps } from './src/props'

export { LewInput }
export type { LewInputEmits, LewInputProps, InputModel }
export { inputEmits, inputModel, inputProps }

export default LewInput
```

### æ–‡æ¡£é…ç½®

åœ¨ `docs/docs/{component}/api/` ç›®å½•ä¸‹åˆ›å»º `model.ts`ï¼š

```typescript
// docs/docs/input/api/model.ts
import { convertProps } from 'docs/lib/utils'
import { inputModel } from 'lew-ui'

export default {
  title: 'Model',
  columnsKey: 'props',  // æ³¨æ„ï¼šä½¿ç”¨ 'props'
  orderNum: 50,
  data: convertProps(inputModel),
}
```

### å›½é™…åŒ–é…ç½®

```typescript
// docs/locals/zh.ts
export default {
  components: {
    input: {
      // ... other config
      model: {
        modelValue: 'è¾“å…¥æ¡†ç»‘å®šå€¼',
        prefixValue: 'å‰ç¼€é€‰æ‹©å™¨ç»‘å®šå€¼',
        suffixValue: 'åç¼€é€‰æ‹©å™¨ç»‘å®šå€¼',
      },
    },
  },
}
```

### defineModel ä½¿ç”¨è§„èŒƒ

#### âœ… æ¨èç”¨æ³•

```typescript
// 1. å¿…å¡«çš„ v-model
const modelValue = defineModel<string | undefined>({ required: true })

// 2. å¯é€‰çš„ v-model
const expandKeys = defineModel<string[]>('expandKeys', { required: false, default: [] })

// 3. å¤šç±»å‹æ”¯æŒ
const value = defineModel<string | string[]>()

// 4. å¯¹è±¡ç±»å‹
const dateRange = defineModel<Record<string, Date | undefined>>({
  default: () => ({})
})
```

#### âŒ é¿å…ç”¨æ³•

```typescript
// âŒ ä¸è¦åŒæ—¶å®šä¹‰ props å’Œä½¿ç”¨ defineModel
const props = defineProps({
  modelValue: String  // ä¸ defineModel å†²çª
})
const modelValue = defineModel<string>()

// âŒ ä¸è¦åœ¨ defineModel çš„åŒæ—¶ emit update:modelValue
const modelValue = defineModel<string>()
emit('update:modelValue', value)  // defineModel ä¼šè‡ªåŠ¨å¤„ç†

// âŒ ä¸è¦åœ¨ emits.ts ä¸­å®šä¹‰ update:modelValue
export const inputEmits = {
  'update:modelValue': (value: any) => true  // âŒ ä¸éœ€è¦
}
```

### ç±»å‹å®šä¹‰

```typescript
// model.ts ä¸­å®šä¹‰ç±»å‹ä¾›æ–‡æ¡£ä½¿ç”¨
export const inputModel = {
  modelValue: {
    type: String,
    default: undefined
  }
}

// å¯¼å‡ºç±»å‹
export type InputModel = typeof inputModel
```

### æ£€æŸ¥æ¸…å•

å®ç° v-model æ”¯æŒæ—¶ç¡®è®¤ï¼š
- [ ] ç»„ä»¶å†…ä½¿ç”¨ `defineModel` API
- [ ] åˆ›å»ºäº† `model.ts` æ–‡ä»¶ï¼ˆä¾›æ–‡æ¡£ä½¿ç”¨ï¼‰
- [ ] åœ¨ `index.ts` ä¸­å¯¼å‡º model å¯¹è±¡å’Œç±»å‹
- [ ] åˆ›å»ºäº† `docs/docs/{component}/api/model.ts`
- [ ] åœ¨ `docs/docs/{component}/api/index.ts` ä¸­å¯¼å‡º model
- [ ] æ·»åŠ äº†å›½é™…åŒ–é…ç½®ï¼ˆ`model` å­—æ®µï¼‰
- [ ] æ²¡æœ‰åœ¨ emits ä¸­å®šä¹‰ `update:modelValue`
- [ ] æ²¡æœ‰æ‰‹åŠ¨ emit `update:modelValue`

## emits.ts æ ‡å‡†å†™æ³•ï¼ˆæ—§ç‰ˆæœ¬ï¼Œä¿ç•™ä½œä¸ºå‚è€ƒï¼‰

```typescript
// å®šä¹‰ emits å¯¹è±¡
export const buttonEmits = {
  click: (e: MouseEvent) => true,
  change: (value: string | number) => true,
  'update:modelValue': (value: any) => true
}

// å¯¼å‡º Emits ç±»å‹
export type ButtonEmits = typeof buttonEmits
```

## ç»„ä»¶ Vue æ–‡ä»¶ç»“æ„

### script åŒºåŸŸé¡ºåº
```vue
<script setup lang="ts">
// 1. å¯¼å…¥ï¼ˆåˆ†ç»„ï¼šVue API / ç¬¬ä¸‰æ–¹ / å†…éƒ¨ç»„ä»¶ / å·¥å…·å‡½æ•° / ç±»å‹/é…ç½®ï¼‰
import { computed, ref } from 'vue'
import CommonIcon from 'lew-ui/_components/CommonIcon.vue'
import { object2class } from 'lew-ui/utils'
import { buttonEmits } from './emits'
import { buttonProps } from './props'

// 2. Props & Emits
const props = defineProps(buttonProps)
const emit = defineEmits(buttonEmits)

// 3. v-modelï¼ˆå¦‚æ”¯æŒåŒå‘ç»‘å®šï¼‰
const modelValue = defineModel<string | undefined>({ required: true })

// 4. å“åº”å¼çŠ¶æ€
const isLoading = ref(false)

// 5. è®¡ç®—å±æ€§
const buttonClass = computed(() => { ... })

// 6. æ–¹æ³•
const handleClick = () => { ... }

// 7. ç”Ÿå‘½å‘¨æœŸï¼ˆå¦‚éœ€è¦ï¼‰
onMounted(() => { ... })
</script>
```

### template è§„èŒƒ
- æ ¹å…ƒç´ ä½¿ç”¨ç»„ä»¶åä½œä¸ºç±»åï¼ˆkebab-caseï¼‰ï¼š`class="lew-button"`
- ä½¿ç”¨ BEM å‘½åå­å…ƒç´ ï¼š`lew-button__content`ã€`lew-button--loading`
- åˆç†ä½¿ç”¨ v-if / v-show
- ä¼˜å…ˆä½¿ç”¨å…·åæ’æ§½

### style è§„èŒƒ
- å¿…é¡»ä½¿ç”¨ `<style lang="scss" scoped>`
- ä½¿ç”¨ CSS å˜é‡å®šä¹‰å¯å˜æ ·å¼
- éµå¾ª BEM å‘½åè§„èŒƒ
- é¿å…æ·±å±‚é€‰æ‹©å™¨åµŒå¥—ï¼ˆå½±å“æ€§èƒ½ï¼‰
- åªåŠ¨ç”» transform å’Œ opacityï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

## å·¥å…·å‡½æ•°ä½¿ç”¨è§„èŒƒ

### any2px() - CSS å°ºå¯¸è½¬æ¢

**ä½œç”¨**ï¼šå°†å„ç§å°ºå¯¸å€¼ç»Ÿä¸€è½¬æ¢ä¸ºæœ‰æ•ˆçš„ CSS å€¼ã€‚

**æ”¯æŒçš„è¾“å…¥æ ¼å¼**ï¼š

```typescript
import { any2px } from 'lew-ui/utils'

// âœ… çº¯æ•°å­—ï¼ˆè‡ªåŠ¨æ·»åŠ  pxï¼‰
any2px(100)           // â†’ '100px'
any2px('100')         // â†’ '100px'

// âœ… CSS å•ä½ï¼ˆä¿æŒåŸæ ·ï¼‰
any2px('100px')       // â†’ '100px'
any2px('100%')        // â†’ '100%'
any2px('100vh')       // â†’ '100vh'    â­ æ”¯æŒè§†å£å•ä½
any2px('100vw')       // â†’ '100vw'    â­ æ”¯æŒè§†å£å•ä½
any2px('10rem')       // â†’ '10rem'
any2px('2em')         // â†’ '2em'
any2px('100vmin')     // â†’ '100vmin'
any2px('100vmax')     // â†’ '100vmax'

// âœ… calc() è¡¨è¾¾å¼ï¼ˆä¿æŒåŸæ ·ï¼‰
any2px('calc(100% - 20px)')     // â†’ 'calc(100% - 20px)'
any2px('calc(100vw - 200px)')   // â†’ 'calc(100vw - 200px)'

// âœ… auto å…³é”®å­—
any2px('auto')        // â†’ 'auto'
```

**ä½¿ç”¨åœºæ™¯**ï¼š

```vue
<script setup>
import { any2px } from 'lew-ui/utils'

const props = defineProps({
  width: { type: [String, Number] },  // å…è®¸ '100vw' æˆ– 500
  height: { type: [String, Number] }, // å…è®¸ 'calc(100vh - 60px)' æˆ– 300
})

const style = computed(() => ({
  width: any2px(props.width),   // âœ… ç»Ÿä¸€å¤„ç†
  height: any2px(props.height), // âœ… ç»Ÿä¸€å¤„ç†
}))
</script>
```

**âŒ é”™è¯¯ç¤ºä¾‹**ï¼š

```typescript
// âŒ ä¸è¦ç›´æ¥æ‹¼æ¥å•ä½ï¼ˆä¼šå¯¼è‡´ '100vw' å˜æˆ '100vwpx'ï¼‰
const width = props.width + 'px'

// âŒ ä¸è¦æ‰‹åŠ¨åˆ¤æ–­ç±»å‹
const width = typeof props.width === 'number' ? `${props.width}px` : props.width

// âœ… æ­£ç¡®ï¼šä½¿ç”¨ any2px
const width = any2px(props.width)
```

### æ•°å€¼è§£æï¼ˆä»…é™åƒç´ å€¼ï¼‰

**å¦‚æœéœ€è¦å¯¹åƒç´ å€¼è¿›è¡Œæ•°å€¼è®¡ç®—**ï¼Œä½¿ç”¨åŸç”Ÿ `Number.parseFloat()`ï¼š

```typescript
// âœ… è§£æåƒç´ å€¼è¿›è¡Œè®¡ç®—
const width = Number.parseFloat('100px')  // â†’ 100
const height = Number.parseFloat('200')   // â†’ 200

// ç”¨äºæ•°å€¼æ¯”è¾ƒ
if (Number.parseFloat(props.width) > 500) {
  // ...
}

// ç”¨äºæ•°å­¦è¿ç®—
const total = Number.parseFloat(props.width) + Number.parseFloat(props.padding)

// è®¡ç®—åå†è½¬å› CSS å€¼
const calculatedWidth = Number.parseFloat(props.width) + 100
style.width = any2px(calculatedWidth)  // 100 â†’ '100px'
```

**âš ï¸ é‡è¦æç¤º**ï¼š

```typescript
// âŒ ä¸è¦å°è¯•è§£æéåƒç´ å•ä½
Number.parseFloat('50%')     // â†’ 50  âŒ å¤±å»äº† % å«ä¹‰
Number.parseFloat('100vw')   // â†’ 100 âŒ å¤±å»äº† vw å«ä¹‰
Number.parseFloat('10rem')   // â†’ 10  âŒ å¤±å»äº† rem å«ä¹‰

// âœ… å¯¹äºéåƒç´ å•ä½ï¼Œç›´æ¥ä½¿ç”¨ any2px ä¿ç•™åŸæ ·
any2px('50%')     // â†’ '50%'
any2px('100vw')   // â†’ '100vw'
any2px('10rem')   // â†’ '10rem'
```

### ç»„ä»¶ä¸­çš„å…¸å‹ç”¨æ³•

```vue
<script setup lang="ts">
import { any2px } from 'lew-ui/utils'

const props = defineProps({
  width: { type: [String, Number], default: '500px' },
  height: { type: [String, Number], default: '100vh' },
})

// 1. ç›´æ¥åº”ç”¨åˆ°æ ·å¼ï¼ˆä¿ç•™åŸå§‹å•ä½ï¼‰
const drawerStyle = computed(() => ({
  width: any2px(props.width),   // '100vw' â†’ '100vw' âœ…
  height: any2px(props.height), // 'calc(100vh - 60px)' â†’ 'calc(100vh - 60px)' âœ…
}))

// 2. éœ€è¦æ•°å€¼è®¡ç®—æ—¶ï¼ˆä»…é™åƒç´ å€¼ï¼‰
const isWideDrawer = computed(() => {
  // åªåœ¨ç¡®å®šæ˜¯åƒç´ å€¼æ—¶æ‰è§£æ
  const width = Number.parseFloat(String(props.width))
  const viewportWidth = window.innerWidth
  return width >= viewportWidth * 0.5  // æ•°å€¼æ¯”è¾ƒ
})

// 3. è®¡ç®—åå†è½¬æ¢
const adjustedWidth = computed(() => {
  const baseWidth = Number.parseFloat(String(props.width))  // æå–æ•°å­—
  const finalWidth = baseWidth + 100                        // è®¡ç®—
  return any2px(finalWidth)                                 // è½¬å› CSS å€¼ '600px'
})
</script>

<template>
  <div :style="drawerStyle">
    <!-- å†…å®¹ -->
  </div>
</template>
```

### æœ€ä½³å®è·µæ€»ç»“

| åœºæ™¯ | ä½¿ç”¨æ–¹æ³• | ç¤ºä¾‹ |
|-----|---------|------|
| Props ç›´æ¥ç”¨äºæ ·å¼ | `any2px()` | `:style="{ width: any2px(width) }"` |
| åƒç´ å€¼æ¯”è¾ƒåˆ¤æ–­ | `Number.parseFloat()` | `if (Number.parseFloat(width) > 500)` |
| åƒç´ å€¼è®¡ç®— | `Number.parseFloat()` | `Number.parseFloat(a) + Number.parseFloat(b)` |
| è®¡ç®—ååº”ç”¨æ ·å¼ | ä¸¤è€…ç»“åˆ | `any2px(Number.parseFloat(w) + 100)` |
| æ”¯æŒå¤šç§å•ä½è¾“å…¥ | `any2px()` | å…è®¸ `100vw`, `500px`, `50%`, `calc(...)` |

**âš ï¸ æ€§èƒ½æ³¨æ„**: `Number.parseFloat()` åªèƒ½ç”¨äºåƒç´ å€¼ï¼›éåƒç´ å•ä½ï¼ˆvwã€remã€%ï¼‰åº”ç›´æ¥ä½¿ç”¨ `any2px()` ä¿ç•™åŸæ ·ã€‚

## æ ·å¼å–èˆä¸æ€§èƒ½ä¼˜åŒ–

> **æ ¸å¿ƒåŸåˆ™**ï¼šæ•°å€¼è®¡ç®—ç”¨ styleï¼ŒçŠ¶æ€ç±»å‹ç”¨ class

### âœ… ä»€ä¹ˆæ—¶å€™ã€Œå¿…é¡»ã€ç”¨ computed style

#### 1. æ ·å¼å€¼æ˜¯"æ•°å­¦ç»“æœ"

```typescript
// âœ… è¿›åº¦æ¡
const progressStyle = computed(() => ({
  width: `${percent.value}%`
}))

// âœ… æ‹–æ‹½ä½ç§»
const dragStyle = computed(() => ({
  transform: `translate3d(${x.value}px, ${y.value}px, 0)`
}))

// âœ… åŠ¨æ€åæ ‡
const positionStyle = computed(() => ({
  left: `${coords.x}px`,
  top: `${coords.y}px`
}))
```

**é€‚ç”¨åœºæ™¯**ï¼š
- è¿›åº¦æ¡ã€æ‹–æ‹½ã€åŠ¨ç”»
- Canvasã€æ—¶é—´è½´ã€åæ ‡ç³»ç»Ÿ
- ä»»ä½•éœ€è¦å®æ—¶è®¡ç®—åƒç´ å€¼çš„åœºæ™¯

#### 2. CSS æ— æ³•æå‰ç©·ä¸¾

```typescript
// âœ… ç”¨æˆ·è¾“å…¥çš„é¢œè‰²
const style = computed(() => ({
  backgroundColor: userColor.value
}))

// âœ… æ¥å£è¿”å›çš„å°ºå¯¸
const style = computed(() => ({
  width: any2px(apiWidth.value),
  height: any2px(apiHeight.value)
}))
```

**é€‚ç”¨åœºæ™¯**ï¼š
- é¢œè‰²ã€å°ºå¯¸ã€ä½ç½®æ˜¯ç”¨æˆ·è¾“å…¥æˆ–æ¥å£è¿”å›
- ä¸å¯èƒ½å†™ 1000 ä¸ª class æ¥ç©·ä¸¾

#### 3. é«˜æ€§èƒ½åŠ¨ç”»ï¼ˆtransform / translateï¼‰

```typescript
// âœ… ä½¿ç”¨ transform çš„åŠ¨ç”»
const style = computed(() => ({
  transform: `translate3d(${x.value}px, ${y.value}px, 0)`
}))
```

**åŸå› **ï¼štransform è§¦å‘ GPU åŠ é€Ÿï¼Œç”¨ class åè€Œæ›´æ…¢æ›´ä¹±

### âŒ ä»€ä¹ˆæ—¶å€™ã€Œä¸€å®šä¸è¦ã€ç”¨ computed style

#### 1. çŠ¶æ€åˆ‡æ¢ç±»æ ·å¼

```typescript
// âŒ ä¸æ¨è
const style = computed(() => ({
  color: isActive.value ? '#1677ff' : '#999'
}))

// âœ… æ¨è
const classes = computed(() => ({
  'is-active': isActive.value
}))
```

```vue
<div :class="classes" />
```

```css
.is-active {
  color: var(--lew-color-primary);
}
```

**åŸå› **ï¼š
- æ ·å¼è¯­ä¹‰ä¸¢å¤±
- éš¾ä»¥ç»´æŠ¤
- è®¾è®¡ç³»ç»Ÿæ— æ³•å¤ç”¨
- ä¸»é¢˜ç³»ç»Ÿæ— æ³•æ¥ç®¡

#### 2. å’Œè®¾è®¡è§„èŒƒå¼ºç»‘å®šçš„æ ·å¼

```typescript
// âŒ ä¸è¦è¿™æ ·å†™æŒ‰é’®æ ·å¼
const buttonStyle = computed(() => ({
  backgroundColor: props.type === 'primary' ? '#1677ff' : '#fff',
  color: props.type === 'primary' ? '#fff' : '#333',
  border: props.disabled ? '1px solid #d9d9d9' : 'none'
}))

// âœ… æ­£ç¡®å†™æ³•
const buttonClass = computed(() => [
  'lew-button',
  `lew-button-${props.type}`,
  {
    'is-disabled': props.disabled,
    'is-loading': loading.value
  }
])
```

**åº”è¯¥ç”¨ class çš„æ ·å¼**ï¼š
- æŒ‰é’®ä¸»è‰²ã€hoverã€focus
- ç¦ç”¨æ€ã€é”™è¯¯æ€
- æ‰€æœ‰å’Œè®¾è®¡è§„èŒƒç›¸å…³çš„æ ·å¼

#### 3. ç»„ä»¶åº“çš„å¯å¤ç”¨æ ·å¼

> **ç»„ä»¶åº“é‡Œæ»¥ç”¨ style = éå¸¸ä¸ä¸“ä¸š**

```typescript
// âŒ è¿™ä¼šå¯¼è‡´ï¼š
// - ä¸»é¢˜ç³»ç»Ÿæ— æ³•åˆ‡æ¢
// - Dark mode å´©æºƒ
// - ç”¨æˆ·æ— æ³•è¦†ç›–æ ·å¼
// - Tailwind / CSS Variables æ— æ³•æ¥ç®¡

const style = computed(() => ({
  padding: props.size === 'large' ? '12px 24px' : '8px 16px',
  fontSize: props.size === 'large' ? '16px' : '14px'
}))

// âœ… æ­£ç¡®åšæ³•
const classes = computed(() => [
  'lew-button',
  `lew-button--${props.size}`
])
```

```css
.lew-button--large {
  padding: var(--lew-button-padding-large);
  font-size: var(--lew-button-font-size-large);
}

.lew-button--medium {
  padding: var(--lew-button-padding-medium);
  font-size: var(--lew-button-font-size-medium);
}
```

### ğŸ”¥ ç»„ä»¶åº“é‡Œçš„ã€Œé»„é‡‘èŒƒå¼ã€

#### æ¨èç»“æ„

```typescript
// 1. class è¡¨è¾¾çŠ¶æ€å’Œç±»å‹
const classes = computed(() => [
  'lew-button',
  `lew-button--${props.type}`,
  `lew-button--${props.size}`,
  {
    'is-loading': loading.value,
    'is-disabled': disabled.value,
    'is-round': props.round,
    'is-circle': props.circle,
    'is-text': props.text,
    'is-block': props.block
  }
])

// 2. åªæŠŠã€Œæ•°å€¼å‹ã€åŠ¨æ€å€¼æ”¾åˆ° style
const style = computed(() => {
  const result: Record<string, string | undefined> = {}
  
  // åŠ¨æ€å®½åº¦
  if (props.block) {
    result.width = '100%'
  } else if (props.width) {
    result.width = any2px(props.width)
  }
  
  // CSS å˜é‡ï¼ˆç”¨äºæ·±åº¦å®šåˆ¶ï¼‰
  if (props.customColor) {
    result['--button-color'] = props.customColor
  }
  
  return result
})
```

```vue
<button :class="classes" :style="style">
  <slot>{{ text }}</slot>
</button>
```

```css
.lew-button {
  /* ä½¿ç”¨ CSS å˜é‡ä½œä¸ºæ¡¥æ¢ */
  background-color: var(--button-color, var(--lew-color-primary));
}

.lew-button--primary { ... }
.lew-button--danger { ... }
.is-loading { ... }
.is-disabled { ... }
```

#### CSS Variables ä½œä¸ºæ¡¥æ¢ï¼ˆå¼ºçƒˆæ¨èï¼‰

```typescript
// âœ… ä½¿ç”¨ CSS å˜é‡ä¼ é€’åŠ¨æ€å€¼
const style = computed(() => ({
  '--gap': any2px(props.gap),
  '--radius': any2px(props.radius),
  '--duration': `${props.duration}ms`
}))
```

```vue
<div class="lew-container" :style="style">
  <slot />
</div>
```

```css
.lew-container {
  gap: var(--gap, 8px);
  border-radius: var(--radius, 4px);
  transition-duration: var(--duration, 300ms);
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ ·å¼é€»è¾‘åœ¨ CSS ä¸­ï¼ˆè¯­ä¹‰æ¸…æ™°ï¼‰
- âœ… æ”¯æŒä¸»é¢˜ç³»ç»Ÿ
- âœ… ç”¨æˆ·å¯ä»¥é€šè¿‡ CSS è¦†ç›–
- âœ… æ€§èƒ½æ›´å¥½ï¼ˆæµè§ˆå™¨ä¼˜åŒ–ï¼‰

### ä¸€çœ¼åˆ¤æ–­ç”¨å“ªä¸ªï¼ˆå®ç”¨å£è¯€ï¼‰

#### åˆ¤æ–­æ ‡å‡† 1ï¼šä½ æ˜¯ä¸æ˜¯åœ¨"ç®—å€¼"ï¼Ÿ

```typescript
// åœ¨ç®—å€¼ â†’ style
const style = computed(() => ({
  width: `${baseWidth.value + padding.value * 2}px`  // âœ…
}))

// ä¸åœ¨ç®—å€¼ â†’ class
const classes = computed(() => ({
  'is-active': isActive.value  // âœ…
}))
```

#### åˆ¤æ–­æ ‡å‡† 2ï¼šè¿™ä¸ªæ ·å¼æœ‰æ²¡æœ‰"åå­—"ï¼Ÿ

```typescript
// æœ‰åå­—ï¼ˆactive / disabled / errorï¼‰â†’ class
const classes = computed(() => ({
  'is-active': isActive.value,      // âœ… æœ‰è¯­ä¹‰
  'is-disabled': isDisabled.value,  // âœ… æœ‰è¯­ä¹‰
  'is-error': hasError.value        // âœ… æœ‰è¯­ä¹‰
}))

// æ²¡æœ‰åå­—ï¼ˆ20pxã€37%ã€x+10ï¼‰â†’ style
const style = computed(() => ({
  left: `${x.value + 10}px`,        // âœ… çº¯æ•°å€¼
  width: `${percent.value}%`        // âœ… çº¯æ•°å€¼
}))
```

#### åˆ¤æ–­æ ‡å‡† 3ï¼šCSS é…ç½®å¯¹è±¡æ˜¯å¦åº”è¯¥ç”¨ classï¼Ÿ

```typescript
// âŒ ä¸å¥½ï¼šé™æ€é…ç½®å¯¹è±¡ç”¨ computed style
const STATUS_PLACEMENT_CONFIG = {
  "top-left": { top: "-0.05rem", left: "-0.05rem" },
  "top-right": { top: "-0.05rem", right: "-0.05rem" },
  // ...
}

const dotStyle = computed(() => ({
  ...STATUS_PLACEMENT_CONFIG[props.placement],  // âŒ é™æ€é…ç½®ä¸åº”è¯¥ç”¨ style
  backgroundColor: STATUS_COLOR_CONFIG[props.status],
}))

// âœ… æ›´å¥½ï¼šé™æ€é…ç½®ç”¨ CSS classï¼ŒåªæŠŠåŠ¨æ€å€¼æ”¾ style
const statusDotClass = computed(() => 
  `lew-avatar-status-dot--${props.shape}-${props.placement}`
)

const statusDotStyle = computed(() => ({
  backgroundColor: STATUS_COLOR_CONFIG[props.status],  // âœ… åªä¿ç•™åŠ¨æ€å€¼
  width: any2px(dotSize),  // âœ… åŠ¨æ€è®¡ç®—çš„å€¼
}))
```

```css
/* âœ… CSS ä¸­å®šä¹‰é™æ€é…ç½® */
.lew-avatar-status-dot--circle-top-left {
  top: -0.05rem;
  left: -0.05rem;
}

.lew-avatar-status-dot--circle-top-right {
  top: -0.05rem;
  right: -0.05rem;
}
```

**åŸåˆ™**ï¼š
- **é™æ€é…ç½®**ï¼ˆä½ç½®ã€å›ºå®šå°ºå¯¸ï¼‰â†’ ç”¨ CSS class
- **åŠ¨æ€å€¼**ï¼ˆé¢œè‰²ã€è®¡ç®—å°ºå¯¸ï¼‰â†’ ç”¨ computed style
- **ç»„åˆä½¿ç”¨**ï¼šclass æ§åˆ¶ç»“æ„ï¼Œstyle æ§åˆ¶åŠ¨æ€å€¼

### æ€§èƒ½å¯¹æ¯”

#### computed style çš„æ€§èƒ½æˆæœ¬

```typescript
// âŒ æ¯æ¬¡ isActive å˜åŒ–éƒ½ä¼šè§¦å‘å†…è”æ ·å¼æ›´æ–°
const style = computed(() => ({
  color: isActive.value ? '#1677ff' : '#999',
  backgroundColor: isActive.value ? '#e6f7ff' : '#fff',
  borderColor: isActive.value ? '#1677ff' : '#d9d9d9'
}))

// âœ… åªæ˜¯åˆ‡æ¢ classï¼Œæµè§ˆå™¨ä½¿ç”¨ç¼“å­˜çš„æ ·å¼
const classes = computed(() => ({
  'is-active': isActive.value
}))
```

**æ€§èƒ½å·®å¼‚**ï¼š
- **computed style**ï¼šéœ€è¦é‡æ–°è§£æã€è®¡ç®—ã€åº”ç”¨æ ·å¼
- **class**ï¼šæµè§ˆå™¨ç›´æ¥ä½¿ç”¨ CSSOM ç¼“å­˜ï¼ˆå¿« 10-100 å€ï¼‰

### æ ·å¼å–èˆæ€»ç»“

| ç”¨é€” | ä½¿ç”¨æ–¹å¼ | å…¸å‹åœºæ™¯ |
|------|---------|---------|
| **è¡¨è¾¾çŠ¶æ€** | class | active / disabled / loading / error |
| **è¡¨è¾¾ç±»å‹** | class | primary / danger / large / small |
| **è®¾è®¡ç³»ç»Ÿ** | class | æ‰€æœ‰è®¾è®¡è§„èŒƒå®šä¹‰çš„æ ·å¼ |
| **è®¡ç®—ç»“æœ** | style | è¿›åº¦æ¡ã€æ‹–æ‹½ã€åŠ¨ç”» |
| **åŠ¨æ€æ•°å€¼** | style | ç”¨æˆ·è¾“å…¥ã€API è¿”å›çš„å€¼ |
| **æ¡¥æ¢** | CSS Variables | å¯å®šåˆ¶çš„æ•°å€¼å‚æ•° |

**ç»„ä»¶åº“åŸåˆ™**ï¼š
- âœ… **class ä¸ºä¸»ï¼Œstyle ä¸ºè¾…**
- âœ… **çŠ¶æ€ç”¨ classï¼Œæ•°å€¼ç”¨ style**
- âœ… **CSS Variables æ˜¯æœ€å¥½çš„æ¡¥æ¢**

## ç»„ä»¶è®¾è®¡ä¼˜åŒ–

### 1. Props è®¾è®¡

```typescript
// âœ… ä½¿ç”¨åŸºç¡€ç±»å‹è€Œéå¯¹è±¡ï¼ˆå‡å°‘å“åº”å¼å¼€é”€ï¼‰
// âŒ ä¸å¥½
defineProps<{
  config: {
    size: string
    color: string
    disabled: boolean
  }
}>()
// âœ… æ›´å¥½
defineProps<{
  size: string
  color: string
  disabled: boolean
}>()

// âœ… é¿å… props ä¼ é€’å¤§å¯¹è±¡
// âŒ ä¸å¥½
defineProps<{
  data: LargeDataObject  // æ•´ä¸ªå¯¹è±¡éƒ½ä¼šè¢« Vue å¤„ç†
}>()
// âœ… æ›´å¥½ï¼šåªä¼ å¿…è¦çš„æ•°æ®
defineProps<{
  dataId: string
  dataName: string
}>()
```

### 2. Slots ä¼˜åŒ–

```vue
<script setup lang="ts">
// âœ… æ£€æµ‹ slot æ˜¯å¦å­˜åœ¨ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“
const slots = useSlots()
const hasFooter = computed(() => !!slots.footer)
</script>

<template>
  <!-- âŒ ä¸å¥½ï¼šæ€»æ˜¯æ¸²æŸ“åŒ…è£¹å…ƒç´  -->
  <div class="footer-wrapper">
    <slot name="footer" />
  </div>

  <!-- âœ… æ›´å¥½ï¼šæœ‰å†…å®¹æ‰æ¸²æŸ“ -->
  <div v-if="hasFooter" class="footer-wrapper">
    <slot name="footer" />
  </div>
</template>
```

### 3. äº‹ä»¶å¤„ç†

```vue
<script setup lang="ts">
// âœ… ä½¿ç”¨å‡½æ•°å¼•ç”¨è€Œéå†…è”ç®­å¤´å‡½æ•°ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰
const handleClick = (e: MouseEvent) => {
  emit('click', e)
}

// âœ… é˜²æŠ–/èŠ‚æµ
import { useDebounceFn, useThrottleFn } from '@vueuse/core'

const debouncedSearch = useDebounceFn((value: string) => {
  // æœç´¢é€»è¾‘
}, 300)
</script>

<template>
  <!-- âŒ ä¸å¥½ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•° -->
  <button @click="() => emit('click')">Click</button>

  <!-- âœ… æ›´å¥½ï¼šä½¿ç”¨å‡½æ•°å¼•ç”¨ -->
  <button @click="handleClick">Click</button>

  <!-- âœ… ç®€å•æƒ…å†µå¯ä»¥å†…è” emit -->
  <button @click="emit('click', $event)">Click</button>
</template>
```

### 4. CSS ä½œç”¨åŸŸä¸æ€§èƒ½

```scss
// âœ… ä½¿ç”¨ scoped é¿å…å…¨å±€æ±¡æŸ“
<style lang="scss" scoped>
.lew-button {
  // ç»„ä»¶æ ·å¼
}
</style>

// âŒ é¿å…æ·±å±‚é€‰æ‹©å™¨åµŒå¥—ï¼ˆå½±å“æ€§èƒ½ï¼‰
// ä¸å¥½ï¼š
.lew-table {
  .lew-table-row {
    .lew-table-cell {
      .lew-table-cell-content {
        // 4 å±‚åµŒå¥—
      }
    }
  }
}
// æ›´å¥½ï¼š
.lew-table-cell-content {
  // ç›´æ¥å®šä½
}
```

### 5. CSS å˜é‡æ€§èƒ½

```scss
// âœ… åœ¨æ ¹å…ƒç´ å®šä¹‰å˜é‡
.lew-button {
  --lew-button-bg: transparent;
  --lew-button-color: var(--lew-color-primary);
  
  background: var(--lew-button-bg);
  color: var(--lew-button-color);
}

// âŒ é¿å…è¿‡åº¦ä½¿ç”¨ calc()
// ä¸å¥½ï¼š
width: calc(calc(100% - 20px) / 3 + 5px);
// æ›´å¥½ï¼šé¢„è®¡ç®—æˆ–ä½¿ç”¨ CSS Grid
```

### 6. åŠ¨ç”»æ€§èƒ½

```scss
// âœ… åªåŠ¨ç”» transform å’Œ opacity
.lew-button {
  transition: transform 0.2s, opacity 0.2s;
  
  &:hover {
    transform: translateY(-2px);
    opacity: 0.8;
  }
}

// âŒ é¿å…åŠ¨ç”»å¸ƒå±€å±æ€§
// ä¸å¥½ï¼š
transition: width 0.3s, height 0.3s, top 0.3s;

// âœ… ä½¿ç”¨ will-change æç¤ºæµè§ˆå™¨ï¼ˆè°¨æ…ï¼‰
.lew-dropdown {
  will-change: transform, opacity;
}
```

### 7. æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–

#### Tree-shaking å‹å¥½

```typescript
// âœ… ä½¿ç”¨å…·åå¯¼å‡º
export { LewButton }
export { LewInput }

// âŒ é¿å…æ•´ä½“å¯¼å‡º
// export default { LewButton, LewInput }

// âœ… é¿å…å¯¼å…¥æ•´ä¸ª lodash
// âŒ import _ from 'lodash'
// âœ… import { debounce } from 'lodash-es'

// âœ… æ¡ä»¶å¯¼å…¥
if (isDev) {
  const devTool = await import('./devTool')
}
```

#### ä¾èµ–ç®¡ç†

```typescript
// âœ… ä½¿ç”¨é¡¹ç›®å·²æœ‰çš„ä¾èµ–
import { useDebounce } from '@vueuse/core'  // âœ… é¡¹ç›®å·²å®‰è£…

// âŒ é¿å…å¼•å…¥é‡å¤åŠŸèƒ½çš„åŒ…
// import debounce from 'awesome-debounce'  // âŒ æ–°å¢ä¾èµ–

// âœ… å¯¹äºç®€å•åŠŸèƒ½ï¼Œè€ƒè™‘è‡ªå·±å®ç°
export function debounce<T extends (...args: any[]) => any>(
  fn: T,
  delay: number
): T {
  let timer: ReturnType<typeof setTimeout>
  return ((...args) => {
    clearTimeout(timer)
    timer = setTimeout(() => fn(...args), delay)
  }) as T
}
```

#### ä»£ç åˆ†å‰²

```typescript
// ç»„ä»¶åº“çš„ index.ts
// âœ… æ”¯æŒæŒ‰éœ€å¯¼å…¥
export { LewButton } from './button'
export { LewInput } from './input'

// ç”¨æˆ·å¯ä»¥ï¼š
import { LewButton } from 'lew-ui'  // åªæ‰“åŒ… Button
```

## ç¦æ­¢äº‹é¡¹

âŒ **ä¸å…è®¸**ï¼š
- åœ¨ `src/` å¤–æ”¾ç½®ç»„ä»¶æºç 
- ä½¿ç”¨é `Lew` å‰ç¼€çš„ç»„ä»¶å
- åœ¨ props.ts ä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘
- å¯¼å‡ºæœªåœ¨ index.ts ä¸­å£°æ˜çš„å†…å®¹
- åœ¨ç»„ä»¶å†…ç¡¬ç¼–ç æ ·å¼å€¼ï¼ˆåº”ä½¿ç”¨ CSS å˜é‡ï¼‰
- åˆ›å»ºä¸å¿…è¦çš„æ·±å±‚åµŒå¥—ç›®å½•

âœ… **æ¨è**ï¼š
- ä¿æŒæ–‡ä»¶èŒè´£å•ä¸€
- Props å’Œ Emits åˆ†ç¦»åˆ°ç‹¬ç«‹æ–‡ä»¶
- ä½¿ç”¨ TypeScript ä¸¥æ ¼ç±»å‹
- å¤ç”¨å…¬å…±ç»„ä»¶ï¼ˆå¦‚ `CommonIcon`ï¼‰

## æ£€æŸ¥æ¸…å•

åˆ›å»º/ä¿®æ”¹ç»„ä»¶æ—¶ç¡®è®¤ï¼š

### åŸºç¡€ç»“æ„
- [ ] ç»„ä»¶åç¬¦åˆ `Lew{Name}` è§„èŒƒ
- [ ] ç›®å½•ç»“æ„æ­£ç¡®ï¼ˆindex.ts + src/ï¼‰
- [ ] props.ts ä½¿ç”¨ PropType å’Œ as const
- [ ] index.ts å¯¼å‡ºç»„ä»¶å’Œç±»å‹ï¼ˆæ”¯æŒ Tree-shakingï¼‰
- [ ] Vue æ–‡ä»¶ä½¿ç”¨ `<script setup lang="ts">`
- [ ] æ ·å¼ä½¿ç”¨ scoped SCSS
- [ ] ç±»åéµå¾ª BEM è§„èŒƒ
- [ ] æ²¡æœ‰ TypeScript é”™è¯¯
- [ ] æ²¡æœ‰ ESLint/Stylelint é”™è¯¯

### MDC æ–‡æ¡£ï¼ˆå¿…éœ€ï¼‰
- [ ] ç»„ä»¶ç›®å½•ä¸‹å­˜åœ¨ `{component-name}.mdc` æ–‡ä»¶
- [ ] MDC æ–‡æ¡£åŒ…å«å®Œæ•´çš„ 6 ä¸ªç« èŠ‚
- [ ] Props/Events/Slots ç­‰ API ä¿¡æ¯ä¸ä»£ç ä¿æŒåŒæ­¥
- [ ] ä¿®æ”¹ç»„ä»¶åå·²æ›´æ–°å˜æ›´æ—¥å¿—

### v-model æ”¯æŒï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] ç»„ä»¶å†…ä½¿ç”¨ `defineModel` API
- [ ] åˆ›å»ºäº† `model.ts` æ–‡ä»¶ï¼ˆä¾›æ–‡æ¡£ä½¿ç”¨ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨propså†…å®šä¹‰äº†ï¼Œå¦‚æœæ˜¯éœ€è¦æŠ½ç¦»å‡ºæ¥ï¼‰
- [ ] åœ¨ `index.ts` ä¸­å¯¼å‡º model å¯¹è±¡å’Œç±»å‹
- [ ] åˆ›å»ºäº† `docs/docs/{component}/api/model.ts`
- [ ] åœ¨ `docs/docs/{component}/api/index.ts` ä¸­å¯¼å‡º model
- [ ] æ·»åŠ äº†å›½é™…åŒ–é…ç½®ï¼ˆ`model` å­—æ®µï¼‰
- [ ] æ²¡æœ‰åœ¨ emits ä¸­å®šä¹‰ `update:modelValue`
- [ ] æ²¡æœ‰æ‰‹åŠ¨ emit `update:modelValue`

### æ ·å¼ä¸æ€§èƒ½
- [ ] **çŠ¶æ€åˆ‡æ¢ä½¿ç”¨ classï¼ˆä¸æ˜¯ computed styleï¼‰**
- [ ] **åªåœ¨è®¡ç®—æ•°å€¼æ—¶ä½¿ç”¨ style**
- [ ] **è®¾è®¡è§„èŒƒæ ·å¼éƒ½åœ¨ CSS ä¸­ï¼ˆä¸åœ¨ JSï¼‰**
- [ ] **ä½¿ç”¨ CSS Variables ä¼ é€’åŠ¨æ€å‚æ•°**
- [ ] é¿å…äº†ä¸å¿…è¦çš„å“åº”å¼æ•°æ®
- [ ] computed æœ‰åˆç†çš„ç¼“å­˜ç­–ç•¥
- [ ] æ ·å¼åŠ¨ç”»åªä½¿ç”¨ transform/opacity
- [ ] é¿å…æ·±å±‚é€‰æ‹©å™¨åµŒå¥—

### æ‰“åŒ…ä¸ä¾èµ–
- [ ] æ²¡æœ‰å¼•å…¥ä¸å¿…è¦çš„ä¾èµ–
- [ ] æ”¯æŒ tree-shaking
- [ ] ç»„ä»¶ä½“ç§¯ç¬¦åˆç›®æ ‡ï¼ˆ< 10KBï¼‰
- [ ] ä½¿ç”¨é¡¹ç›®å·²æœ‰çš„ä¾èµ–ï¼ˆé¿å…é‡å¤åŠŸèƒ½åŒ…ï¼‰

### æ€§èƒ½è°ƒè¯•å·¥å…·

### ç§»é™¤æ‰€æœ‰çš„æ³¨é‡Š


```bash
# åˆ†ææ‰“åŒ…ä½“ç§¯
pnpm run analyze

# è¿è¡Œæ€§èƒ½æµ‹è¯•
pnpm run test:performance

# TypeScript ç±»å‹æ£€æŸ¥
pnpm run typecheck
```

---
