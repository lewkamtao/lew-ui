@use 'sass:map';
@use './color/foundation' as *;
@use './color/dark' as dark;
@use './color/semantic' as semantic;

@function get-color-value($color-map, $step) {
  @return map-get($color-map, $step);
}

@mixin export-color-variants-light($color-name, $color-map) {
  // 主色和状态色（step 6, 7, 8）
  --lew-color-#{$color-name}: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-active: #{get-color-value($color-map, 8)};

  // Light 类型（step 1, 2, 3）- 轻色背景
  --lew-color-#{$color-name}-light: #{get-color-value($color-map, 1)};
  --lew-color-#{$color-name}-light-hover: #{get-color-value($color-map, 2)};
  --lew-color-#{$color-name}-light-active: #{get-color-value($color-map, 3)};
  // Light 类型文字色（step 6，深色）
  --lew-color-#{$color-name}-light-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-light-text-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-light-text-active: #{get-color-value($color-map, 8)};

  // Fill 类型（浅色模式：step 6, 7, 8）- 实心按钮，使用主色（深色）作为背景，白色文字
  --lew-color-#{$color-name}-fill: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-fill-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-fill-active: #{get-color-value($color-map, 8)};
  // Fill 类型文字色（白色）
  --lew-color-#{$color-name}-fill-text: #fff;
  --lew-color-#{$color-name}-fill-text-hover: #fff;
  --lew-color-#{$color-name}-fill-text-active: #fff;

  // Ghost 和 Text 类型文字色（step 6，主色）
  --lew-color-#{$color-name}-ghost-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-ghost-text-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-ghost-text-active: #{get-color-value($color-map, 8)};
  --lew-color-#{$color-name}-text-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-text-text-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-text-text-active: #{get-color-value($color-map, 8)};

  // Dark（step 6，与主色相同）
  --lew-color-#{$color-name}-dark: #{get-color-value($color-map, 6)};
}

@mixin export-color-variants-dark($color-name, $color-map) {
  // 主色和状态色（step 6, 7, 8）
  --lew-color-#{$color-name}: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-active: #{get-color-value($color-map, 8)};

  // Light 类型（step 1, 2, 3）- 轻色背景
  --lew-color-#{$color-name}-light: #{get-color-value($color-map, 1)};
  --lew-color-#{$color-name}-light-hover: #{get-color-value($color-map, 2)};
  --lew-color-#{$color-name}-light-active: #{get-color-value($color-map, 3)};
  // Light 类型文字色（step 6，浅色）
  --lew-color-#{$color-name}-light-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-light-text-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-light-text-active: #{get-color-value($color-map, 8)};

  // Fill 类型（暗黑模式：step 5）- 使用更饱和的色阶以体现实心、饱和的效果，on-dark（step 6，浅色）作为文字
  --lew-color-#{$color-name}-fill: #{get-color-value($color-map, 5)};
  --lew-color-#{$color-name}-fill-hover: #{get-color-value($color-map, 5)};
  --lew-color-#{$color-name}-fill-active: #{get-color-value($color-map, 5)};
  // Fill 类型文字色（step 6，浅色）
  --lew-color-#{$color-name}-fill-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-fill-text-hover: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-fill-text-active: #{get-color-value($color-map, 6)};

  // Ghost 和 Text 类型文字色（step 6，主色，浅色）
  --lew-color-#{$color-name}-ghost-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-ghost-text-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-ghost-text-active: #{get-color-value($color-map, 8)};
  --lew-color-#{$color-name}-text-text: #{get-color-value($color-map, 6)};
  --lew-color-#{$color-name}-text-text-hover: #{get-color-value($color-map, 7)};
  --lew-color-#{$color-name}-text-text-active: #{get-color-value($color-map, 8)};

  // Dark（step 6，与主色相同）
  --lew-color-#{$color-name}-dark: #{get-color-value($color-map, 6)};
}

@mixin export-colors($colors-map, $is-dark: false) {
  $color-names: map-keys($colors-map);

  @each $name in $color-names {
    $color-map: map-get($colors-map, $name);
    @if $is-dark {
      @include export-color-variants-dark($name, $color-map);
    } @else {
      @include export-color-variants-light($name, $color-map);
    }
  }
}

@mixin export-semantic-colors($colors-map, $is-dark: false) {
  $semantic-names: map-keys(semantic.$semantic-colors);

  @each $semantic-name in $semantic-names {
    $base-color-name: map-get(semantic.$semantic-colors, $semantic-name);
    $color-map: map-get($colors-map, $base-color-name);
    @if $is-dark {
      @include export-color-variants-dark($semantic-name, $color-map);
    } @else {
      @include export-color-variants-light($semantic-name, $color-map);
    }
  }
}

:root {
  @include export-colors($colors, false);
  @include export-semantic-colors($colors, false);
}

.lew-dark {
  @include export-colors(dark.$dark-colors, true);
  @include export-semantic-colors(dark.$dark-colors, true);
}
